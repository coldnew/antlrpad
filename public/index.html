<!doctype html>

<html>
<head>
    <title>AntlrPad</title>
    <link rel="stylesheet" href="libs/bootstrap/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="libs/jstree/default/style.min.css" />
    <link rel="stylesheet" href="stylesheets/main.css">
</head>
<body>
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">AntlrPad</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li><a id="save" href="#">Save</a></li>
                    <!-- <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Examples <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">Java</a></li>
                            <li><a href="#">C#</a></li>
                            <li><a href="#">Python</a></li>
                            <li><a href="#">JavaScript</a></li>
                        </ul>
                    </li> -->
                </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>
    <div class="container">
        <div class="row m10b m10t">
            <div class="col-md-12">
                <div class="input-group">
                    <input type="text" id="src" class="form-control" value="select id from SomeTable">
                    <div class="input-group-btn">
                        <button class="btn btn-primary" id="parse">Parse</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="alert alert-warning" id="parseMessages"></div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="alert alert-danger" id="grammarError">There are problems with this grammar</div>
                <div class="form-group">
                    <select class="form-control m10b" id="startRule">

                    </select>
                    <ul class="nav nav-tabs" role="tablist">
                        <li role="presentation" class="active"><a href="#grammarTab" role="tab" data-toggle="tab">Grammar</a></li>
                        <li role="presentation"><a href="#lexerTab" role="tab" data-toggle="tab">Lexer</a></li>
                    </ul>
                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane active" id="grammarTab">
                            <div id="grammar">parser grammar MySQLParser;

options
{ tokenVocab = MySQLLexer; }

stat
: select_clause+
;

schema_name
: ID
;

select_clause
: SELECT column_list_clause ( FROM table_references )? ( where_clause )?
;

table_name
: ID
;

table_alias
: ID
;

column_name
: ( ( schema_name DOT )? ID DOT )? ID ( column_name_alias )? | ( table_alias DOT )? ID | USER_VAR ( column_name_alias )?
;

column_name_alias
: ID
;

index_name
: ID
;

column_list
: LPAREN column_name ( COMMA column_name )* RPAREN
;

column_list_clause
: column_name ( COMMA column_name )*
;

from_clause
: FROM table_name ( COMMA table_name )*
;

select_key
: SELECT
;

where_clause
: WHERE expression
;

expression
: simple_expression ( expr_op simple_expression )*
;

element
: USER_VAR | ID | ( '|' ID '|' ) | INT | column_name
;

right_element
: element
;

left_element
: element
;

target_element
: element
;

relational_op
: EQ | LTH | GTH | NOT_EQ | LET | GET
;

expr_op
: AND | XOR | OR | NOT
;

between_op
: BETWEEN
;

is_or_is_not
: IS | IS NOT
;

simple_expression
: left_element relational_op right_element | target_element between_op left_element AND right_element | target_element is_or_is_not NULL
;

table_references
: table_reference ( ( COMMA table_reference ) | join_clause )*
;

table_reference
: table_factor1 | table_atom
;

table_factor1
: table_factor2 ( ( INNER | CROSS )? JOIN table_atom ( join_condition )? )?
;

table_factor2
: table_factor3 ( STRAIGHT_JOIN table_atom ( ON expression )? )?
;

table_factor3
: table_factor4 ( ( LEFT | RIGHT ) ( OUTER )? JOIN table_factor4 join_condition )?
;

table_factor4
: table_atom ( NATURAL ( ( LEFT | RIGHT ) ( OUTER )? )? JOIN table_atom )?
;

table_atom
: ( table_name ( partition_clause )? ( table_alias )? ( index_hint_list )? ) | ( subquery subquery_alias ) | ( LPAREN table_references RPAREN ) | ( OJ table_reference LEFT OUTER JOIN table_reference ON expression )
;

join_clause
: ( ( INNER | CROSS )? JOIN table_atom ( join_condition )? ) | ( STRAIGHT_JOIN table_atom ( ON expression )? ) | ( ( LEFT | RIGHT ) ( OUTER )? JOIN table_factor4 join_condition ) | ( NATURAL ( ( LEFT | RIGHT ) ( OUTER )? )? JOIN table_atom )
;

join_condition
: ( ON expression ( expr_op expression )* ) | ( USING column_list )
;

index_hint_list
: index_hint ( COMMA index_hint )*
;

index_options
: ( INDEX | KEY ) ( FOR ( ( JOIN ) | ( ORDER BY ) | ( GROUP BY ) ) )?
;

index_hint
: USE index_options LPAREN ( index_list )? RPAREN | IGNORE index_options LPAREN index_list RPAREN
;

index_list
: index_name ( COMMA index_name )*
;

partition_clause
: PARTITION LPAREN partition_names RPAREN
;

partition_names
: partition_name ( COMMA partition_name )*
;

partition_name
: ID
;

subquery_alias
: ID
;

subquery
: LPAREN select_clause RPAREN
;</div>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="lexerTab">
                            <div id="lexer">lexer grammar MySQLLexer;
@ header {
}

SELECT
: 'select'
;


FROM
: 'from'
;


WHERE
: 'where'
;


AND
: 'and' | '&&'
;


OR
: 'or' | '||'
;


XOR
: 'xor'
;


IS
: 'is'
;


NULL
: 'null'
;


LIKE
: 'like'
;


IN
: 'in'
;


EXISTS
: 'exists'
;


ALL
: 'all'
;


ANY
: 'any'
;


TRUE
: 'true'
;


FALSE
: 'false'
;


DIVIDE
: 'div' | '/'
;


MOD
: 'mod' | '%'
;


BETWEEN
: 'between'
;


REGEXP
: 'regexp'
;


PLUS
: '+'
;


MINUS
: '-'
;


NEGATION
: '~'
;


VERTBAR
: '|'
;


BITAND
: '&'
;


POWER_OP
: '^'
;


BINARY
: 'binary'
;


SHIFT_LEFT
: '<<'
;


SHIFT_RIGHT
: '>>'
;


ESCAPE
: 'escape'
;


ASTERISK
: '*'
;


RPAREN
: ')'
;


LPAREN
: '('
;


RBRACK
: ']'
;


LBRACK
: '['
;


COLON
: ':'
;


ALL_FIELDS
: '.*'
;


EQ
: '='
;


LTH
: '<'
;


GTH
: '>'
;


NOT_EQ
: '!='
;


NOT
: 'not'
;


LET
: '<='
;


GET
: '>='
;


SEMI
: ';'
;


COMMA
: ','
;


DOT
: '.'
;


COLLATE
: 'collate'
;


INNER
: 'inner'
;


OUTER
: 'outer'
;


JOIN
: 'join'
;


CROSS
: 'cross'
;


USING
: 'using'
;


INDEX
: 'index'
;


KEY
: 'key'
;


ORDER
: 'order'
;


GROUP
: 'group'
;


BY
: 'by'
;


FOR
: 'for'
;


USE
: 'use'
;


IGNORE
: 'ignore'
;


PARTITION
: 'partition'
;


STRAIGHT_JOIN
: 'straight_join'
;


NATURAL
: 'natural'
;


LEFT
: 'left'
;


RIGHT
: 'right'
;


OJ
: 'oj'
;


ON
: 'on'
;


ID
: ( 'a' .. 'z' | 'A' .. 'Z' | '_' )+
;


INT
: '0' .. '9'+
;


NEWLINE
: '\r'? '\n' -> skip
;


WS
: ( ' ' | '\t' | '\n' | '\r' )+ -> skip
;


USER_VAR
: '@' ( USER_VAR_SUBFIX1 | USER_VAR_SUBFIX2 | USER_VAR_SUBFIX3 | USER_VAR_SUBFIX4 )
;


fragment USER_VAR_SUBFIX1
: ( '`' ( ~ '`' )+ '`' )
;


fragment USER_VAR_SUBFIX2
: ( '\'' ( ~ '\'' )+ '\'' )
;


fragment USER_VAR_SUBFIX3
: ( '\"' ( ~ '\"' )+ '\"' )
;


fragment USER_VAR_SUBFIX4
: ( 'A' .. 'Z' | 'a' .. 'z' | '_' | '$' | '0' .. '9' | DOT )+
;</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div id="tree">Click 'Parse' to display parse tree here</div>
            </div>
        </div>
    </div>

    <script src="libs/jquery/jquery-2.2.4.min.js"></script>
    <script src="libs/bootstrap/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script src="libs/jstree/jstree.min.js"></script>

    <script src="/javascripts/app.js"></script>

    <script src="/libs/ace/ace.js" type="text/javascript" charset="utf-8"></script>
</body>
</html>